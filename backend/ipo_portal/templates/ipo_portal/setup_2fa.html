{% extends "admin/base_site.html" %} {% comment %} Or your app's base template {% endcomment %}
{% load i18n %}

{% block title %}{% trans "Setup 2-Factor Authentication" %}{% endblock %}

{% block content %}
<div>
    <h1>{% trans "Setup 2-Factor Authentication" %}</h1>
    <p>{% trans "Scan the QR code below with your authenticator app (like Google Authenticator, Authy, etc.)." %}</p>

    <div>
        {{ qr_code_svg|safe }}
    </div>

    <p>{% trans "After scanning, enter the 6-digit code generated by your app to confirm setup." %}</p>

    <form method="post">
        {% csrf_token %}
        <div>
            <label for="otp_code">{% trans "OTP Code:" %}</label>
            <input type="text" name="otp_code" id="otp_code" pattern="\d{6}" title="Enter a 6-digit code" required>
        </div>

        {% if error %}
            <p style="color: red;">{{ error }}</p>
        {% endif %}

        <button type="submit">{% trans "Confirm & Enable 2FA" %}</button>
    </form>
    <br>
    <p><a href="{% url 'admin:index' %}">{% trans "Back to Admin" %}</a></p> {# Adjust if not admin context #}
</div>
{% endblock %}
