{% extends "ipo_portal/base_portal.html" %} {% load i18n %} {% load static %} {#
For crispy forms or custom static assets if needed later #} {% block title %}{%
trans "Data Room" %} - IPO Portal{% endblock %} {% block page_title %}{{
page_title|default:"Data Room" }}{% endblock %} {% block content %}
<div style="margin-bottom: 30px">
  <h3>{% trans "Upload New Document" %}</h3>
  <form
    method="post"
    enctype="multipart/form-data"
    style="
      background-color: #f9f9f9;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #eee;
    "
  >
    {% csrf_token %} {# Render form fields manually for more control, or use {{
    document_form.as_p }} for simplicity #}
    <div style="margin-bottom: 15px">
      <label
        for="{{ document_form.title.id_for_label }}"
        style="display: block; margin-bottom: 5px; font-weight: bold"
        >{{ document_form.title.label }}</label
      >
      {{ document_form.title }} {% if document_form.title.errors %}
      <div style="color: red; font-size: 0.9em">
        {{ document_form.title.errors }}
      </div>
      {% endif %}
    </div>

    <div style="margin-bottom: 15px">
      <label
        for="{{ document_form.section.id_for_label }}"
        style="display: block; margin-bottom: 5px; font-weight: bold"
        >{{ document_form.section.label }}</label
      >
      {{ document_form.section }} {% if document_form.section.errors %}
      <div style="color: red; font-size: 0.9em">
        {{ document_form.section.errors }}
      </div>
      {% endif %}
    </div>

    <div style="margin-bottom: 15px">
      <label
        for="{{ document_form.file.id_for_label }}"
        style="display: block; margin-bottom: 5px; font-weight: bold"
        >{{ document_form.file.label }}</label
      >
      {{ document_form.file }} {% if document_form.file.errors %}
      <div style="color: red; font-size: 0.9em">
        {{ document_form.file.errors }}
      </div>
      {% endif %} {% if document_form.file.help_text %}<small
        style="display: block; margin-top: 5px; color: #555"
        >{{ document_form.file.help_text }}</small
      >{% endif %}
    </div>

    <button
      type="submit"
      style="
        background-color: #3498db;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      "
    >
      {% trans "Upload Document" %}
    </button>
  </form>
</div>

<hr />

<h3>{% trans "Uploaded Documents" %}</h3>
{% if documents_by_section %} {% for section_name, documents_in_section in
documents_by_section.items %} {% if documents_in_section %}
<h4
  style="
    margin-top: 20px;
    margin-bottom: 10px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
  "
>
  {{ section_name }}
</h4>
<ul style="list-style-type: none; padding-left: 0">
  {% for doc in documents_in_section %}
  <li
    style="
      background-color: #fff;
      border: 1px solid #ddd;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    "
  >
    <div>
      <strong>{{ doc.title }}</strong> ({{ doc.filename }})
      <br />
      <small style="color: #777">
        {% trans "Uploaded by:" %} {{ doc.uploaded_by.username|default:"System"
        }} {% trans "on" %} {{ doc.uploaded_at|date:"Y-m-d H:i" }}
      </small>
    </div>
    <a
      href="{{ doc.file.url }}"
      target="_blank"
      style="
        background-color: #2ecc71;
        color: white;
        padding: 8px 12px;
        text-decoration: none;
        border-radius: 4px;
      "
      >{% trans "Download" %}</a
    >
  </li>
  {% endfor %}
</ul>
{% else %} {# Optionally display a message if a section is empty, or just skip
it #} {#
<p>No documents in {{ section_name }}.</p>
#} {% endif %} {% endfor %} {% else %}
<p>{% trans "No documents have been uploaded to the Data Room yet." %}</p>
{% endif %} {% endblock %}
