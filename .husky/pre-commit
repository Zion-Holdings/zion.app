#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Run React component validation
echo "ğŸ“‹ Validating React components..."
if node automation/react-component-validator.cjs; then
    echo "âœ… React component validation passed"
else
    echo "âŒ React component validation failed. Please fix issues before committing."
    echo "ğŸ’¡ Run 'node automation/react-component-validator.cjs' for detailed report."
    exit 1
fi

# Run build preflight check
echo "ğŸš€ Running build preflight check..."
if node automation/build-preflight-checker.cjs; then
    echo "âœ… Build preflight check passed"
else
    echo "âŒ Build preflight check failed. Please fix issues before committing."
    echo "ğŸ’¡ Run 'node automation/build-preflight-checker.cjs' for detailed report."
    exit 1
fi

echo "ğŸ‰ All pre-commit checks passed!"