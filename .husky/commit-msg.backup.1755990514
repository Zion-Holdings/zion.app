echo "ðŸš€ Enhanced Commit Message Validation..."

# Validate commit message format
COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

<<<<<<< HEAD
# Check for conventional commit format
if ! echo "$COMMIT_MSG" | grep -qE "^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)((.+))?: .+"; then
    echo "âŒ Commit message does not follow conventional commit format"
    echo "Expected format: type(scope): description"
    echo "Types: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert"
    echo "Example: feat(auth): add login functionality"
    exit 1
fi

# Check message length
MSG_LENGTH=$(echo "$COMMIT_MSG" | wc -c)
if [ "$MSG_LENGTH" -gt 72 ]; then
    echo "âš ï¸  Commit message is longer than 72 characters"
    echo "Consider using a shorter description"
fi

echo "âœ… Commit message validation passed!"
=======
# Ensure not empty
if [ -z "$commit_msg" ]; then
  echo "âŒ Error: Commit message cannot be empty"
  exit 1
fi

# Enforce Conventional Commits with commitlint if installed
if [ -x "./node_modules/.bin/commitlint" ]; then
  if npx --no-install commitlint --edit "$1"; then
    echo "âœ… Commit message validation passed"
    exit 0
  else
    echo "âŒ Commit message does not follow Conventional Commits"
    exit 1
  fi
else
  echo "â„¹ï¸  commitlint not installed locally; skipping strict check"
fi 
>>>>>>> origin/cursor/automate-and-stabilize-husky-processes-for-main-branch-b783
