#!/usr/bin/env sh
set -e

# Get the commit message
commit_msg=$(cat "$1")

# Ensure not empty
if [ -z "$commit_msg" ]; then
  echo "❌ Error: Commit message cannot be empty"
  exit 1
fi

# Enforce Conventional Commits with commitlint if installed
if [ -x "./node_modules/.bin/commitlint" ]; then
  if npx --no-install commitlint --edit "$1"; then
    echo "✅ Commit message validation passed"
    exit 0
  else
    echo "❌ Commit message does not follow Conventional Commits"
    exit 1
  fi
else
  echo "ℹ️  commitlint not installed locally; skipping strict check"
fi 