#!/usr/bin/env sh

# Get the commit message
commit_msg=$(cat "$1")

# Check if commit message is not empty
if [ -z "$commit_msg" ]; then
    echo "❌ Error: Commit message cannot be empty"
    exit 1
fi

# Check if commit message is too short
if [ ${#commit_msg} -lt 10 ]; then
    echo "❌ Error: Commit message should be at least 10 characters long"
    exit 1
fi

# Check for common prefixes (optional but recommended)
if ! echo "$commit_msg" | grep -qE "^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?:"; then
    echo "⚠️  Warning: Consider using conventional commit format (e.g., feat: add new feature)"
    echo "   Examples: feat:, fix:, docs:, style:, refactor:, test:, chore:"
    # Don't exit with error, just warn
fi

echo "✅ Commit message validation passed" 