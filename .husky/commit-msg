echo "üöÄ Enhanced Commit Message Validation..."

# Validate commit message format
COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# Check for conventional commit format
if ! echo "$COMMIT_MSG" | grep -qE "^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)((.+))?: .+"; then
    echo "‚ùå Commit message does not follow conventional commit format"
    echo "Expected format: type(scope): description"
    echo "Types: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert"
    echo "Example: feat(auth): add login functionality"
    exit 1
fi

# Check message length
MSG_LENGTH=$(echo "$COMMIT_MSG" | wc -c)
if [ "$MSG_LENGTH" -gt 72 ]; then
    echo "‚ö†Ô∏è  Commit message is longer than 72 characters"
    echo "Consider using a shorter description"
fi

echo "‚úÖ Commit message validation passed!"
