#!/usr/bin/env sh
set -e

echo "ðŸ”„ Post-rewrite actions running..."

# Check if package files were modified during rewrite
if git diff HEAD@{1} --name-only | grep -E "package\.json|package-lock\.json" > /dev/null 2>&1; then
    echo "ðŸ“¦ Package files changed during rewrite, updating dependencies..."
    npm install
fi

# Clear build cache if config files changed
if git diff HEAD@{1} --name-only | grep -E "next\.config\.js|tsconfig\.json|tailwind\.config\.js" > /dev/null 2>&1; then
    echo "ðŸ§¹ Clearing build cache..."
    rm -rf .next 2>/dev/null || true
fi

# Automation system checks removed (script not present)

echo "âœ… Post-rewrite actions completed"
