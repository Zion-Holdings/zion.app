(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4008],{1441:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(o){c=!0,s=o}finally{try{a||null==n.return||n.return()}finally{if(c)throw s}}return i}}(e,t)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t,n,r,s,i,a){try{var c=e[i](a),o=c.value}catch(u){return void n(u)}c.done?t(o):Promise.resolve(o).then(r,s)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function c(e){i(a,r,s,c,o,"next",e)}function o(e){i(a,r,s,c,o,"throw",e)}c(void 0)}))}}n.r(t),n.d(t,{default:function(){return m}});var c=n(809),o=n.n(c),u=n(7294),l=n(5893),d=n(4155).env.NEXT_PUBLIC_AUTOMATION_DASHBOARD_URL||"http://localhost:3001";function m(){var e=(0,u.useState)(null),t=e[0],n=e[1],r=(0,u.useState)(!1),i=r[0],c=r[1],m=(0,u.useState)(null),f=m[0],h=m[1],p=function(){var e=a(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),h(null),e.prev=2,e.next=5,fetch("".concat(d,"/api/status"));case 5:return t=e.sent,e.next=8,t.json();case 8:r=e.sent,n(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),h((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Failed to load status");case 15:return e.prev=15,c(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/api/run-all"),{method:"POST"});case 3:setTimeout(p,1500),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/api/run"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system:t})});case 3:setTimeout(p,1500),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){p();var e=setInterval(p,5e3);return function(){return clearInterval(e)}}),[]);var y=(null===t||void 0===t?void 0:t.systems)||[],g=(null===t||void 0===t?void 0:t.alerts)||[];return(0,l.jsx)("main",{className:"min-h-screen p-6 md:p-10 bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold",children:"Automation Control Center"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:p,className:"px-3 py-2 bg-gray-800 text-white rounded-md",children:"Refresh"}),(0,l.jsx)("button",{onClick:x,className:"px-3 py-2 bg-blue-600 text-white rounded-md",children:"Run All"}),(0,l.jsx)("button",{onClick:function(){window.open("".concat(d,"/api/report"),"_blank")},className:"px-3 py-2 bg-purple-600 text-white rounded-md",children:"Download Report"})]})]}),f&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-800 rounded",children:f}),i&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-yellow-100 text-yellow-800 rounded",children:"Loading..."}),(0,l.jsxs)("section",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-medium mb-3",children:"Systems"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((function(e){var t=s(e,2),n=t[0],r=t[1];return(0,l.jsxs)("div",{className:"bg-white rounded border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold",children:n}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:r.category||"misc"})]}),(0,l.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(r.isRunning?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:r.isRunning?"Running":"Idle"})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-700 space-y-1 mb-3",children:[(0,l.jsxs)("div",{children:["Success: ",r.successCount||0]}),(0,l.jsxs)("div",{children:["Failures: ",r.failureCount||0]}),(0,l.jsxs)("div",{children:["Avg Time: ",Math.round(r.averageExecutionTime||0),"ms"]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:function(){return v(n)},className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Run"}),(0,l.jsx)("a",{href:"".concat(d,"/api/report"),className:"px-3 py-1 bg-gray-200 rounded",children:"Report"})]})]},n)}))})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-xl font-medium mb-3",children:"Alerts"}),(0,l.jsxs)("div",{className:"space-y-2",children:[0===g.length&&(0,l.jsx)("div",{className:"text-gray-500",children:"No alerts"}),g.map((function(e,t){return(0,l.jsxs)("div",{className:"p-3 rounded ".concat("error"===e.type?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:[(0,l.jsx)("div",{className:"font-medium",children:e.system}),(0,l.jsx)("div",{className:"text-sm",children:e.message}),(0,l.jsx)("div",{className:"text-xs text-gray-600",children:e.timestamp})]},t)}))]})]})]})})}},5034:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/automation",function(){return n(1441)}])},4155:function(e){var t,n,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"===typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,o=[],u=!1,l=-1;function d(){u&&c&&(u=!1,c.length?o=c.concat(o):l=-1,o.length&&m())}function m(){if(!u){var e=a(d);u=!0;for(var t=o.length;t;){for(c=o,o=[];++l<t;)c&&c[l].run();l=-1,t=o.length}c=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.push(new f(e,t)),1!==o.length||u||a(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},function(e){e.O(0,[9774,2888,179],(function(){return t=5034,e(e.s=t);var t}));var t=e.O();_N_E=t}]);