import{r as c}from"./chunk-BVaMFXZF.js";var u=(i,a,n)=>new Promise((r,l)=>{var f=o=>{try{e(n.next(o))}catch(t){l(t)}},m=o=>{try{e(n.throw(o))}catch(t){l(t)}},e=o=>o.done?r(o.value):Promise.resolve(o.value).then(f,m);e((n=n.apply(i,a)).next())});function g(){const[i,a]=c.useState(null),[n,r]=c.useState(!0);return c.useEffect(()=>{const e=localStorage.getItem("zion_user");if(e)try{a(JSON.parse(e))}catch(o){console.error("Error parsing stored user:",o),localStorage.removeItem("zion_user")}r(!1)},[]),{user:i,login:(e,o)=>u(this,null,function*(){r(!0);try{yield new Promise(s=>setTimeout(s,1e3));const t={id:"1",name:"Demo User",email:e,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face"};a(t),localStorage.setItem("zion_user",JSON.stringify(t))}catch(t){throw console.error("Login failed:",t),t}finally{r(!1)}}),logout:()=>u(this,null,function*(){r(!0);try{yield new Promise(e=>setTimeout(e,500)),a(null),localStorage.removeItem("zion_user")}catch(e){throw console.error("Logout failed:",e),e}finally{r(!1)}}),signup:(e,o,t)=>u(this,null,function*(){r(!0);try{yield new Promise(h=>setTimeout(h,1e3));const s={id:"1",name:t,email:e,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face"};a(s),localStorage.setItem("zion_user",JSON.stringify(s))}catch(s){throw console.error("Signup failed:",s),s}finally{r(!1)}}),isLoading:n,isAuthenticated:!!i}}export{g as u};
