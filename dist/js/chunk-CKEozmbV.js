import{r as c}from"./chunk-BVaMFXZF.js";var u=(l,a,n)=>new Promise((t,i)=>{var f=o=>{try{e(n.next(o))}catch(r){i(r)}},m=o=>{try{e(n.throw(o))}catch(r){i(r)}},e=o=>o.done?t(o.value):Promise.resolve(o.value).then(f,m);e((n=n.apply(l,a)).next())});function g(){const[l,a]=c.useState(null),[n,t]=c.useState(!0);return c.useEffect(()=>{const e=localStorage.getItem("zion_user");if(e)try{a(JSON.parse(e))}catch(o){console.error("Error parsing stored user:",o),localStorage.removeItem("zion_user")}t(!1)},[]),{user:l,login:(e,o)=>u(this,null,function*(){t(!0);try{yield new Promise(s=>setTimeout(s,1e3));const r={id:"1",name:"Demo User",email:e,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face"};a(r),localStorage.setItem("zion_user",JSON.stringify(r))}catch(r){throw console.error("Login failed:",r),r}finally{t(!1)}}),logout:()=>u(this,null,function*(){t(!0);try{yield new Promise(e=>setTimeout(e,500)),a(null),localStorage.removeItem("zion_user")}catch(e){throw console.error("Logout failed:",e),e}finally{t(!1)}}),signup:(e,o,r)=>u(this,null,function*(){t(!0);try{yield new Promise(h=>setTimeout(h,1e3));const s={id:"1",name:r,email:e,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face"};a(s),localStorage.setItem("zion_user",JSON.stringify(s))}catch(s){throw console.error("Signup failed:",s),s}finally{t(!1)}}),isLoading:n}}export{g as u};
