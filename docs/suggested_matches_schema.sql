-- Suggested Matches table
create table if not exists public.suggested_matches (
  id bigint generated by default as identity primary key,
  jobId text not null,
  talentSlug text not null,
  score numeric not null,
  createdAt timestamptz not null default now()
);

-- Indexes for query performance
create index if not exists idx_suggested_matches_job on public.suggested_matches(jobId);
create index if not exists idx_suggested_matches_score on public.suggested_matches(score desc);

-- Recommended RLS (enable and restrict by service role for writes)
-- alter table public.suggested_matches enable row level security;
-- create policy "read_suggested_matches" on public.suggested_matches for select using (true);
-- Writes should be from server with service role only
-- Do not create insert/update/delete policies for anon