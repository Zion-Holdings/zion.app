import Head from 'next/head';
import fs from 'fs';
import path from 'path';

export async function getStaticProps() {
  try {
    const p = path.join(process.cwd(), 'data', 'reports', 'seo', 'seo-content-gaps.json');
    const raw = fs.readFileSync(p, 'utf8');
    const data = JSON.parse(raw);
    return { props: { data } };
  } catch {
    return { props: { data: { generatedAt: null, suggestions: [] } } };
  }
}

export default function SeoGapsPage({ data }: { data: { generatedAt: string | null; suggestions: { slug: string; title: string; reason: string; }[] } }) {
  return (
    <div className="min-h-screen bg-slate-950 text-white">
      <Head>
        <title>SEO Content Gaps — Zion</title>
        <meta name="description" content="Auto‑generated SEO content gap suggestions" />
      </Head>
      <main className="mx-auto max-w-5xl px-6 py-10">
        <h1 className="text-3xl font-bold">SEO Content Gaps</h1>
        <p className="mt-2 text-white/70">Suggestions generated by autonomous cloud automation.</p>
        <div className="mt-6 grid grid-cols-1 gap-3">
          {data.suggestions && data.suggestions.length > 0 ? (
            data.suggestions.map((s) => (
              <div key={s.slug} className="rounded-xl border border-white/10 bg-white/5 p-4">
                <div className="text-base font-semibold">{s.title}</div>
                <div className="text-sm text-white/70">{s.reason}</div>
              </div>
            ))
          ) : (
            <div className="text-white/70">No suggestions yet. The automation will populate this soon.</div>
          )}
        </div>
        {data.generatedAt && (
          <div className="mt-6 text-xs text-white/60">Generated at {data.generatedAt}</div>
        )}
      </main>
    </div>
  );
}