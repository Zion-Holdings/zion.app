name: Issue Triage

on:
  issues:
    types: [opened, edited]

<<<<<<< HEAD
jobs:
  triage:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      issues: write
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install
        run: npm ci --omit=optional
      - name: Run triager
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GITHUB_EVENT_PATH: ${{ github.event_path }}
        run: node automation/issue-triager.cjs || true
=======
permissions:
  issues: write

jobs:
  triage:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const { owner, repo } = context.repo;
            const issue = context.payload.issue;
            const title = issue.title.toLowerCase() + ' ' + (issue.body || '').toLowerCase();
            const labels = [];
            if (title.includes('security') || title.includes('vulnerability')) labels.push('security');
            if (title.includes('performance') || title.includes('lighthouse')) labels.push('performance');
            if (title.includes('link') && (title.includes('broken') || title.includes('404'))) labels.push('link-check');
            if (title.includes('dependency') || title.includes('bump')) labels.push('dependencies');
            if (labels.length > 0) {
              await github.rest.issues.addLabels({ owner, repo, issue_number: issue.number, labels });
            }
>>>>>>> origin/cursor/build-developer-api-and-webhook-integration-62ab
