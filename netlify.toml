[build]
  command = "npm ci && npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[[plugins]]
  package = "netlify-plugin-cloudinary"

# Autonomous scheduled functions
[[scheduled.functions]]
  function = "auto_repo_sync"
  cron = "*/15 * * * *"

[[scheduled.functions]]
  function = "link_health"
  cron = "*/30 * * * *"

[[scheduled.functions]]
  function = "promo_rotator"
  cron = "*/30 * * * *"

[[scheduled.functions]]
  function = "site_index"
  cron = "@hourly"

[[scheduled.functions]]
  function = "seo_audit"
  cron = "0 2 * * *"

[[scheduled.functions]]
  function = "daily_status_report"
  cron = "0 3 * * *"

[[scheduled.functions]]
  function = "issue_link_health"
  cron = "15 3 * * *" 