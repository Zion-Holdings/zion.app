[build]
  command = "npm ci && npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[[plugins]]
  package = "netlify-plugin-cloudinary"

# Scheduled functions
[[scheduled.functions]]
  name = "cron-weekly-dao"
  cron = "0 6 * * 1" # Mondays at 06:00 UTC

[[scheduled.functions]]
  name = "cron-weekly-learn"
  cron = "0 6 * * 1" # Mondays at 06:00 UTC

[[scheduled.functions]]
  name = "cron-daily-rankings"
  cron = "0 3 * * *" # daily at 03:00 UTC

[[scheduled.functions]]
  name = "cron-hourly-uptime"
  cron = "0 * * * *" # hourly

[[scheduled.functions]]
  name = "cron-weekly-seo"
  cron = "0 5 * * 1" # Mondays at 05:00 UTC

[[scheduled.functions]]
  name = "cron-weekly-links"
  cron = "0 4 * * 1" # Mondays at 04:00 UTC

[[scheduled.functions]]
  name = "cron-weekly-deps"
  cron = "0 2 * * 1" # Mondays at 02:00 UTC 

[[scheduled.functions]]
  name = "cron-weekly-changelog"
  cron = "0 1 * * 1"

[[scheduled.functions]]
  name = "cron-weekly-sitemap"
  cron = "0 0 * * 1" 