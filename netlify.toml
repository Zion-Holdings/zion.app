[build]
  command = "npm ci && npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[[plugins]]
  package = "netlify-plugin-cloudinary"

# Autonomous scheduled functions
[[scheduled.functions]]
  function = "auto_repo_sync"
  cron = "*/15 * * * *"

[[scheduled.functions]]
  function = "link_health"
  cron = "*/30 * * * *"

[[scheduled.functions]]
  function = "promo_rotator"
  cron = "*/30 * * * *"

[[scheduled.functions]]
  function = "site_index"
  cron = "@hourly"

[[scheduled.functions]]
  function = "seo_audit"
  cron = "0 2 * * *"

[[scheduled.functions]]
  function = "daily_status_report"
  cron = "0 3 * * *"

[[scheduled.functions]]
  function = "issue_link_health"
  cron = "15 3 * * *"

[[scheduled.functions]]
  function = "pagespeed_audit"
  cron = "0 * * * *"

[[scheduled.functions]]
  function = "security_headers_audit"
  cron = "0 * * * *"

[[scheduled.functions]]
  function = "stale_content_issues"
  cron = "0 4 * * *"

[[scheduled.functions]]
  function = "sitemap_from_index"
  cron = "0 */6 * * *"

[[scheduled.functions]]
  function = "og_meta_audit"
  cron = "*/45 * * * *"

[[scheduled.functions]]
  function = "rss_generator"
  cron = "0 */12 * * *"

[[scheduled.functions]]
  function = "broken_image_checker"
  cron = "*/45 * * * *"

[[scheduled.functions]]
  function = "commit_changelog"
  cron = "0 */6 * * *"

[[scheduled.functions]]
  function = "deep_link_health_from_index"
  cron = "*/30 * * * *"

[[scheduled.functions]]
  function = "sitemap_submitter"
  cron = "0 */6 * * *"

[[scheduled.functions]]
  function = "osv_dependency_audit"
  cron = "0 5 * * *" 