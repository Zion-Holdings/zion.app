export interface MarketTrend {
  id: string;
  keyword: string;
  searchVolume: number;
  trendDirection: 'rising' | 'falling' | 'stable';
  growthRate: number;
  relatedKeywords: string[];
<<<<<<< HEAD
  marketOpportunity: number;
  competitionLevel: 'low' | 'medium' | 'high';
  estimatedValue: number;
  lastUpdated: Date;
=======
  marketOpportunity: 'high' | 'medium' | 'low';
  timestamp: Date;
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
}

export interface CompetitorAnalysis {
  id: string;
  competitorName: string;
<<<<<<< HEAD
  marketShare: number;
  strengths: string[];
  weaknesses: string[];
  pricingStrategy: string;
  targetAudience: string[];
  marketingChannels: string[];
  productFeatures: string[];
  customerReviews: {
    rating: number;
    count: number;
    sentiment: 'positive' | 'neutral' | 'negative';
  };
  lastAnalyzed: Date;
}

export interface MarketInsight {
  id: string;
  title: string;
  description: string;
  category: string;
  impact: 'high' | 'medium' | 'low';
  confidence: number;
  dataSources: string[];
  recommendations: string[];
  estimatedTimeline: string;
  investmentRequired: number;
  potentialROI: number;
=======
  website: string;
  marketShare: number;
  strengths: string[];
  weaknesses: string[];
  opportunities: string[];
  threats: string[];
  pricingStrategy: string;
  featureComparison: Record<string, boolean>;
  socialMediaPresence: Record<string, number>;
  lastUpdated: Date;
}

export interface MarketSegment {
  id: string;
  name: string;
  size: number;
  growthRate: number;
  demographics: Record<string, any>;
  psychographics: Record<string, any>;
  buyingBehavior: Record<string, any>;
  painPoints: string[];
  solutions: string[];
}

export interface MarketReport {
  id: string;
  title: string;
  industry: string;
  summary: string;
  keyFindings: string[];
  marketSize: number;
  growthProjection: number;
  recommendations: string[];
  dataSources: string[];
  generatedAt: Date;
  expiresAt: Date;
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
}

export interface MarketResearchRequest {
  industry: string;
<<<<<<< HEAD
  targetMarket: string[];
  researchType: 'trends' | 'competitors' | 'opportunities' | 'comprehensive';
  budget: number;
  timeline: string;
  specificQuestions?: string[];
}

export interface MarketResearchResponse {
  requestId: string;
  status: 'processing' | 'completed' | 'failed';
  trends: MarketTrend[];
  competitors: CompetitorAnalysis[];
  insights: MarketInsight[];
  summary: string;
  recommendations: string[];
  nextSteps: string[];
  generatedAt: Date;
=======
  targetMarket: string;
  researchType: 'trends' | 'competitors' | 'segments' | 'comprehensive';
  timeframe: '7d' | '30d' | '90d' | '1y';
  includeHistoricalData: boolean;
  customMetrics?: string[];
}

export interface MarketResearchResponse {
  success: boolean;
  data: {
    trends?: MarketTrend[];
    competitors?: CompetitorAnalysis[];
    segments?: MarketSegment[];
    report?: MarketReport;
  };
  insights: string[];
  recommendations: string[];
  nextSteps: string[];
  estimatedROI: number;
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
}

export class AIMarketResearchService {
  private apiKey: string;
  private baseUrl: string;

  constructor(apiKey: string, baseUrl: string = 'https://api.ziontechgroup.com') {
    this.apiKey = apiKey;
    this.baseUrl = baseUrl;
  }

<<<<<<< HEAD
  async analyzeMarketTrends(industry: string, timeframe: string = '30d'): Promise<MarketTrend[]> {
=======
  async analyzeMarketTrends(request: MarketResearchRequest): Promise<MarketTrend[]> {
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/trends`, {
        method: 'POST',
        headers: {
<<<<<<< HEAD
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${this.apiKey}`,
        },
        body: JSON.stringify({ industry, timeframe }),
      });

      if (!response.ok) {
        throw new Error(`Market research API error: ${response.statusText}`);
      }

      const data = await response.json();
      return data.trends.map((trend: any) => ({
        ...trend,
        lastUpdated: new Date(trend.lastUpdated),
      }));
=======
          'Authorization': `Bearer ${this.apiKey}`,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(request),
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      return data.trends || [];
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
    } catch (error) {
      console.error('Error analyzing market trends:', error);
      throw error;
    }
  }

<<<<<<< HEAD
  async analyzeCompetitors(competitorNames: string[], industry: string): Promise<CompetitorAnalysis[]> {
=======
  async analyzeCompetitors(request: MarketResearchRequest): Promise<CompetitorAnalysis[]> {
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/competitors`, {
        method: 'POST',
        headers: {
<<<<<<< HEAD
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${this.apiKey}`,
        },
        body: JSON.stringify({ competitorNames, industry }),
      });

      if (!response.ok) {
        throw new Error(`Competitor analysis API error: ${response.statusText}`);
      }

      const data = await response.json();
      return data.competitors.map((competitor: any) => ({
        ...competitor,
        lastAnalyzed: new Date(competitor.lastAnalyzed),
      }));
=======
          'Authorization': `Bearer ${this.apiKey}`,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(request),
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      return data.competitors || [];
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
    } catch (error) {
      console.error('Error analyzing competitors:', error);
      throw error;
    }
  }

<<<<<<< HEAD
  async generateMarketInsights(request: MarketResearchRequest): Promise<MarketInsight[]> {
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/insights`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${this.apiKey}`,
=======
  async segmentMarket(request: MarketResearchRequest): Promise<MarketSegment[]> {
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/segments`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.apiKey}`,
          'Content-Type': 'application/json',
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
        },
        body: JSON.stringify(request),
      });

      if (!response.ok) {
<<<<<<< HEAD
        throw new Error(`Market insights API error: ${response.statusText}`);
      }

      const data = await response.json();
      return data.insights;
    } catch (error) {
      console.error('Error generating market insights:', error);
=======
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      return data.segments || [];
    } catch (error) {
      console.error('Error segmenting market:', error);
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
      throw error;
    }
  }

<<<<<<< HEAD
  async getComprehensiveAnalysis(request: MarketResearchRequest): Promise<MarketResearchResponse> {
=======
  async generateComprehensiveReport(request: MarketResearchRequest): Promise<MarketReport> {
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/comprehensive`, {
        method: 'POST',
        headers: {
<<<<<<< HEAD
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${this.apiKey}`,
=======
          'Authorization': `Bearer ${this.apiKey}`,
          'Content-Type': 'application/json',
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
        },
        body: JSON.stringify(request),
      });

      if (!response.ok) {
<<<<<<< HEAD
        throw new Error(`Comprehensive analysis API error: ${response.statusText}`);
      }

      const data = await response.json();
      return {
        ...data,
        generatedAt: new Date(data.generatedAt),
      };
    } catch (error) {
      console.error('Error getting comprehensive analysis:', error);
=======
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      return data.report;
    } catch (error) {
      console.error('Error generating comprehensive report:', error);
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
      throw error;
    }
  }

<<<<<<< HEAD
  async getMarketOpportunities(industry: string, investmentRange: [number, number]): Promise<MarketInsight[]> {
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/opportunities`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${this.apiKey}`,
        },
        body: JSON.stringify({ industry, investmentRange }),
      });

      if (!response.ok) {
        throw new Error(`Market opportunities API error: ${response.statusText}`);
      }

      const data = await response.json();
      return data.opportunities;
    } catch (error) {
      console.error('Error getting market opportunities:', error);
=======
  async getRealTimeInsights(keyword: string): Promise<MarketTrend[]> {
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/realtime?keyword=${encodeURIComponent(keyword)}`, {
        headers: {
          'Authorization': `Bearer ${this.apiKey}`,
        },
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      return data.trends || [];
    } catch (error) {
      console.error('Error getting real-time insights:', error);
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
      throw error;
    }
  }

<<<<<<< HEAD
  async exportReport(response: MarketResearchResponse, format: 'pdf' | 'csv' | 'excel'): Promise<string> {
    try {
      const exportResponse = await fetch(`${this.baseUrl}/api/market-research/export`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${this.apiKey}`,
        },
        body: JSON.stringify({ response, format }),
      });

      if (!exportResponse.ok) {
        throw new Error(`Export API error: ${exportResponse.statusText}`);
      }

      const data = await exportResponse.json();
=======
  async exportReport(reportId: string, format: 'pdf' | 'csv' | 'excel'): Promise<string> {
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/export/${reportId}`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.apiKey}`,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ format }),
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
      return data.downloadUrl;
    } catch (error) {
      console.error('Error exporting report:', error);
      throw error;
    }
  }
<<<<<<< HEAD
}

export const aiMarketResearchService = new AIMarketResearchService(process.env.MARKET_RESEARCH_API_KEY || '');
=======

  async scheduleReport(request: MarketResearchRequest, schedule: 'daily' | 'weekly' | 'monthly'): Promise<string> {
    try {
      const response = await fetch(`${this.baseUrl}/api/market-research/schedule`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.apiKey}`,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ ...request, schedule }),
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      return data.scheduleId;
    } catch (error) {
      console.error('Error scheduling report:', error);
      throw error;
    }
  }
}

export const aiMarketResearchService = new AIMarketResearchService(process.env.MARKET_RESEARCH_API_KEY || 'demo-key');
>>>>>>> origin/cursor/enhance-app-services-and-website-with-futuristic-design-1dae
