<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Mode Toggle Test - Fixed</title>
    <style>
        /* Root CSS variables - Light theme default */
        :root {
            --background: hsl(0 0% 100%);
            --foreground: hsl(0 0% 3.9%);
            --primary: hsl(221 83% 53%);
            --primary-foreground: hsl(0 0% 98%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(0 0% 3.9%);
            --border: hsl(0 0% 89.8%);
        }

        /* Dark theme - FIXED: Using :root selector */
        :root[data-theme='dark'],
        :root.dark {
            --background: hsl(222, 47%, 8%);
            --foreground: hsl(0, 0%, 95%);
            --primary: hsl(221, 100%, 66%);
            --primary-foreground: hsl(222, 47%, 8%);
            --card: hsl(220, 30%, 11%);
            --card-foreground: hsl(0, 0%, 95%);
            --border: hsl(222, 39%, 17%);
        }

        /* Apply the CSS variables */
        body {
            background-color: var(--background);
            color: var(--foreground);
            font-family: system-ui, -apple-system, sans-serif;
            padding: 2rem;
            margin: 0;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .card {
            background-color: var(--card);
            color: var(--card-foreground);
            border: 1px solid var(--border);
            padding: 2rem;
            border-radius: 0.5rem;
            margin: 2rem 0;
            transition: all 0.3s ease;
        }

        .button {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .status {
            font-family: monospace;
            font-size: 0.875rem;
            background: rgba(0,0,0,0.1);
            padding: 1rem;
            border-radius: 0.375rem;
            margin-top: 2rem;
        }

        .status span {
            font-weight: bold;
            color: hsl(var(--primary));
        }

        h1 {
            margin-top: 0;
        }

        .demo-text {
            line-height: 1.6;
        }

        .success-message {
            background: hsl(142, 76%, 36%);
            color: white;
            padding: 1rem;
            border-radius: 0.375rem;
            margin: 1rem 0;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .success-message.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úÖ Dark Mode Toggle - Now Fixed!</h1>
        
        <div class="card">
            <h2>The Problem Was:</h2>
            <p class="demo-text">
                The CSS selectors were using <code>[data-theme='dark']</code> without specifying the root element.
                This meant the CSS variables weren't being applied to the <code>:root</code> where Tailwind expected them.
            </p>
        </div>

        <div class="card">
            <h2>The Solution:</h2>
            <p class="demo-text">
                Changed the selectors to <code>:root[data-theme='dark']</code> and added <code>:root.dark</code> 
                to ensure compatibility with both the data-theme attribute and Tailwind's class-based dark mode.
            </p>
        </div>

        <button class="button" onclick="toggleTheme()">
            üåì Toggle Dark Mode
        </button>

        <div id="toast" class="success-message">
            <span id="toast-message">Theme changed!</span>
        </div>

        <div class="status">
            <p>Current theme: <span id="current-theme">light</span></p>
            <p>HTML classes: <span id="html-classes">-</span></p>
            <p>Data-theme attribute: <span id="data-theme">-</span></p>
            <p>Background color: <span id="bg-color">-</span></p>
        </div>
    </div>

    <script>
        function updateStatus() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark') || html.getAttribute('data-theme') === 'dark';
            
            document.getElementById('current-theme').textContent = isDark ? 'dark' : 'light';
            document.getElementById('html-classes').textContent = html.className || 'none';
            document.getElementById('data-theme').textContent = html.getAttribute('data-theme') || 'none';
            
            const bgColor = window.getComputedStyle(document.body).backgroundColor;
            document.getElementById('bg-color').textContent = bgColor;
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark') || html.getAttribute('data-theme') === 'dark';
            
            // Toggle both class and data-theme attribute
            if (isDark) {
                html.classList.remove('dark');
                html.classList.add('light');
                html.setAttribute('data-theme', 'light');
                showToast('‚òÄÔ∏è Bright theme engaged ‚Äî go create.');
            } else {
                html.classList.remove('light');
                html.classList.add('dark');
                html.setAttribute('data-theme', 'dark');
                showToast('üåô Dark mode activated. Happy coding!');
            }
            
            updateStatus();
        }

        // Initialize
        document.documentElement.classList.add('light');
        document.documentElement.setAttribute('data-theme', 'light');
        updateStatus();
    </script>
</body>
</html> 